{{ if and (eq .Values.digest.type "sheba") (eq .Values.digest.sheba.input.type "internal") }}
apiVersion: v1
kind: Service
metadata:
  name: '{{ .Release.Name }}-sheba-faker'
  labels:
    project: tmr
    component: sheba-faker
    release: '{{ .Release.Name }}'
spec:
  selector:
    project: tmr
    component: sheba-faker
    release: '{{ .Release.Name }}'
  ports:
    - protocol: TCP
      port: {{ .Values.digest.sheba.input.internal.faker.port }}
      targetPort: {{ .Values.digest.sheba.input.internal.faker.port }}
{{ end }}